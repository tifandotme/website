@import "tailwindcss";

@plugin "@tailwindcss/typography";

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 5%;
    --muted-small-text: 240 4% 45%;
    --muted-large-text: 240 4% 55%;
    --border: 0 0% 80%;
    --bold: 240 4% 13%;
    --heading: 240 4% 16%;
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --background: 240 4% 8%;
      --foreground: 0 0% 85%;
      --muted-small-text: 0 0% 50%;
      --muted-large-text: 0 0% 39%;
      --border: 0 0% 17%;
      --bold: 0 0% 92%;
      --heading: 0 0% 87%;
    }
    html {
      color-scheme: dark;
    }
  }
}

@utility prose {
  :where(:not(.not-prose, .not-prose *)) {
    --tw-prose-body: hsl(var(--foreground));
    --tw-prose-headings: hsl(var(--heading));
    --tw-prose-links: hsl(var(--foreground));
    --tw-prose-bold: hsl(var(--bold));
    --tw-prose-counters: hsl(var(--color-zinc-500));
    --tw-prose-bullets: hsl(var(--color-zinc-300));
    --tw-prose-hr: hsl(var(--border));
    --tw-prose-quotes: hsl(var(--foreground));
    --tw-prose-quote-borders: hsl(var(--color-zinc-300));
    --tw-prose-captions: hsl(var(--color-zinc-500));
    --tw-prose-code: hsl(var(--foreground));
    --tw-prose-pre-code: hsl(var(--color-zinc-200));
    --tw-prose-pre-bg: var(--codeblock);
    --tw-prose-th-borders: hsl(var(--color-zinc-300));
    --tw-prose-td-borders: hsl(var(--color-zinc-200));

    --tw-prose-invert-body: hsl(var(--foreground));
    --tw-prose-invert-headings: hsl(var(--heading));
    --tw-prose-invert-links: hsl(var(--foreground));
    --tw-prose-invert-bold: hsl(var(--bold));
    --tw-prose-invert-counters: hsl(var(--color-zinc-400));
    --tw-prose-invert-bullets: hsl(var(--color-zinc-600));
    --tw-prose-invert-hr: hsl(var(--border));
    --tw-prose-invert-quotes: hsl(var(--foreground));
    --tw-prose-invert-quote-borders: hsl(var(--color-zinc-700));
    --tw-prose-invert-captions: hsl(var(--color-zinc-400));
    --tw-prose-invert-code: hsl(var(--foreground));
    --tw-prose-invert-pre-code: hsl(var(--color-zinc-300));
    --tw-prose-invert-pre-bg: var(--codeblock);
    --tw-prose-invert-th-borders: hsl(var(--color-zinc-600));
    --tw-prose-invert-td-borders: hsl(var(--color-zinc-700));

    &:where(h2)::before {
      display: block;
      margin-bottom: 1rem;
      height: 3px;
      width: 1.5rem;
      background: hsl(var(--foreground));
      content: "";
    }

    &:where(h2) {
      font-family: var(--font-heading);
      font-size: var(--text-4xl);
      line-height: var(--text-4xl-line-height);
      letter-spacing: var(--tracking-wide);
      font-weight: var(--font-weight-normal);
      margin-top: 3rem;
      margin-bottom: 1.5rem;
    }

    &:where(h3) {
      margin-top: 1.3rem;
      font-weight: var(--font-weight-semibold);
      font-size: var(--text-xl);
      line-height: var(--text-xl--line-height);
    }

    &:where(blockquote p:last-of-type) {
      margin-bottom: 0;
    }

    &:where(blockquote p:first-of-type) {
      margin-top: 0;
      &::before {
        content: none;
      }
    }

    &:where(blockquote p:last-of-type)::after {
      content: none;
    }

    &:where(p + p),
    &:where(blockquote + p),
    &:where(ol),
    &:where(ul) {
      margin-top: 0;
    }

    &:where(blockquote) {
      margin-top: 0;
      font-weight: var(--font-weight-normal);
    }

    &:where(pre) {
      content: none;
    }

    &:where(code) {
      font-weight: var(--font-weight-extrabold);
      color: hsl(var(--bold)) !important;
      &::before {
        content: none;
      }
      &::after {
        content: none;
      }
    }

    &:where(a) {
      font-weight: var(--font-weight-normal);
      text-underline-offset: 1px;
    }

    &:where(figure) {
      margin-top: 1.25rem;
      margin-bottom: 1.25rem;
    }
  }
}

@theme {
  --font-sans: var(--nunito-sans), ui-sans-serif, system-ui, sans-serif,
    "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --font-serif: var(--newsreader), ui-serif, Georgia, Cambria,
    "Times New Roman", Times, serif;
  --font-heading: var(--imbue), ui-serif, Georgia, Cambria, "Times New Roman",
    Times, serif;
  --font-mono: var(--commitmono), ui-monospace, SFMono-Regular, Menlo, Monaco,
    Consolas, "Liberation Mono", "Courier New", monospace;

  --color-foreground: hsl(var(--foreground));
  --color-background: hsl(var(--background));
  --color-primary: hsl(var(--primary));
  --color-border: hsl(var(--border));
  --color-muted: hsl(var(--muted-small-text));
  --color-muted-darker: hsl(var(--muted-large-text));

  --breakpoint-xs: 30rem;
  --breakpoint-2xl: 90rem;

  --font-weight-inherit: inherit;

  @keyframes opacity-pulse {
    0% {
      opacity: 0.2;
    }
    20% {
      opacity: 1;
    }
    100% {
      opacity: 0.2;
    }
  }

  --animate-dialog-overlay-show: dialog-overlay-show 150ms
    cubic-bezier(0.16, 1, 0.3, 1);
  @keyframes dialog-overlay-show {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  --animate-dialog-content-show: dialog-content-show 150ms
    cubic-bezier(0.16, 1, 0.3, 1);
  @keyframes dialog-content-show {
    from {
      opacity: 0;
      transform: translate(0, 5%) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translate(0, 0) scale(1);
    }
  }
}

@utility container-md {
  @apply mx-auto max-w-(--breakpoint-md) px-4 sm:px-6;
}

@utility container-lg {
  @apply mx-auto max-w-(--breakpoint-lg) px-4 sm:px-6;
}

@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-border, currentColor);
  }

  body {
    min-height: 100vh;
    background-color: var(--color-background);
    font-family: var(--font-sans);
    color: var(--color-foreground);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;

    & *::selection,
    &::selection {
      background-color: var(--color-slate-300);
    }

    @media (prefers-color-scheme: dark) {
      & *::selection,
      &::selection {
        background-color: var(--color-slate-400);
        color: var(--color-black);
      }
    }
  }

  em {
    font-family: var(--font-serif);
    font-size: 109%;
  }
}
